## 以太网封装


```
----------------------------------------------------
| 源地址 | 目的地址 | 类型 |  数据      | CRC校验码|
----------------------------------------------------
```


- 使用48bits 的源地址和目的地址
- 有类型字段，为2字节
- 4字节的 CRC 校验
- 包大小至少为 46 字节，如果少于，则填充字节

## 串行链路IP：SLIP（Serial Line IP）

```
转义后的数据
```

- 点对点
- 为防止线路噪声，在数据的开始与结束均发送一个 END（0xc0）字符
- 数据报中的 0xc0 字符转义为 0xdb + 0xdc 两个字符
- 转义字符 0xdb 转义为 oxdb + 0xdd
- 由于SLIP 链路无类型字段，因此不能支持其他协议（ARP，RARP等）


## PPP 点对点协议

- 修改了SLIP 协议的所有缺陷

```
----------------------------------------------------------
|标志|地址|控制| 协议 |         信息          | CRC |标志|
----------------------------------------------------------
```
- 每一帧以标志字符 0x7e 开始和结束，接着是一个地址字节，永远为0xff， 然后是值为 0x03的控制字节
- 协议字段：0021 代表IP数据报，C021 代表链路控制数据，8021 代表网络控制数据
- PPP协议也需要对信息中的特殊字符转义，转义字符为 0x7d

## 环回接口

- 一般为A类地址 127.0.0.1，实际上 127 开头的所有地址都可以当作环回地址（127网络号是预留的环回网络号）
- 发送到环回接口的数据报会完成传输层和网络层的所有过程，在驱动程序中发现是环回地址则拷贝到 IP 输入队列中
- 发送给环回接口的数据报
    - 传给环回地址的任何数据
    - 传给广播与多播地址的数据
    - 任何传给该主机 IP 地址的数据均送到环回接口
- 可以认为是一个特殊的链路层

## MTU(Maximum Transport Unit)

- 最大传输单元是链路层对于数据的大小的限制
- 以太网为 1500字节，减去IP，TCP首部各20字节后应用层数据最大为1460字节
- MTU 最大为 65536 字节，这不是物理限制，而是由于 IP 协议中长度字段逻辑限制的
- 当IP 包比 MTU 大时，就需要进行分片
- 路径MTU
    - 两台主机所经过路径中的 min(MTU)
    - 由于IP选路是动态的，所以 路径MTU 也是动态的
    - 不对称，数据报来回经过的路由可能不一致

## 吞吐量计算

- 交互响应时间超过 100～200ms 就会产生延迟感
- 这是一个往返时间


问题：

书中描述
```
如果线路速率是 9600 b/s， 而一个字节是8 bit， 加上一个起始比特和停止比特，那么线路的速率就是960 B/s
```

这个起始比特和停止比特是什么？从[网友的回答](https://bbs.csdn.net/wap/topics/10259204) 中找到[wikipedia](https://zh.wikipedia.org/wiki/RS-232)上描述: `在RS-232标准中，字符是以一串行的比特串来一个接一个的串列（serial）方式传输，优点是传输线少，配线简单，发送距离可以较远。最常用的编码格式是异步起停（asynchronous start-stop）格式，它使用一个起始比特后面紧跟7或8个数据比特（bit），然后是可选的奇偶校验比特，最后是一或两个停止比特,所以发送一个字符至少需要10比特` 
